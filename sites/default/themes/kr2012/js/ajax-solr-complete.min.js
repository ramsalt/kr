(function(a){var b,c,d,f,k,l,i,m,r,t,q=0,g={},j=[],h=0,e={},p=[],z=null,u=new Image,B=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,O=/[^\.]\.(swf)\s*$/i,C,D=1,w=0,v="",s,o,n=!1,x=a.extend(a("<div/>")[0],{prop:0}),E=a.browser.msie&&a.browser.version<7&&!window.XMLHttpRequest,F=function(){c.hide();u.onerror=u.onload=null;z&&z.abort();b.empty()},G=function(){!1===g.onError(j,q,g)?(c.hide(),n=!1):(g.titleShow=!1,g.width="auto",g.height="auto",b.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),
y())},A=function(){var d=j[q],e,f,h,i,k,m;F();g=a.extend({},a.fn.fancybox.defaults,typeof a(d).data("fancybox")=="undefined"?g:a(d).data("fancybox"));m=g.onStart(j,q,g);if(m===!1)n=!1;else{typeof m=="object"&&(g=a.extend(g,m));h=g.title||(d.nodeName?a(d).attr("title"):d.title)||"";if(d.nodeName&&!g.orig)g.orig=a(d).children("img:first").length?a(d).children("img:first"):a(d);h===""&&g.orig&&g.titleFromAlt&&(h=g.orig.attr("alt"));e=g.href||(d.nodeName?a(d).attr("href"):d.href)||null;if(/^(?:javascript)/i.test(e)||
e=="#")e=null;if(g.type){if(f=g.type,!e)e=g.content}else g.content?f="html":e&&(f=e.match(B)?"image":e.match(O)?"swf":a(d).hasClass("iframe")?"iframe":e.indexOf("#")===0?"inline":"ajax");if(f){f=="inline"&&(d=e.substr(e.indexOf("#")),f=a(d).length>0?"inline":"ajax");g.type=f;g.href=e;g.title=h;if(g.autoDimensions)g.type=="html"||g.type=="inline"||g.type=="ajax"?(g.width="auto",g.height="auto"):g.autoDimensions=!1;if(g.modal)g.overlayShow=!0,g.hideOnOverlayClick=!1,g.hideOnContentClick=!1,g.enableEscapeButton=
!1,g.showCloseButton=!1;g.padding=parseInt(g.padding,10);g.margin=parseInt(g.margin,10);b.css("padding",g.padding+g.margin);a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(l.children())});switch(f){case "html":b.html(g.content);y();break;case "inline":if(a(d).parent().is("#fancybox-content")===!0){n=!1;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(d)).bind("fancybox-cleanup",function(){a(this).replaceWith(l.children())}).bind("fancybox-cancel",
function(){a(this).replaceWith(b.children())});a(d).appendTo(b);y();break;case "image":n=!1;a.fancybox.showActivity();u=new Image;u.onerror=function(){G()};u.onload=function(){n=!0;u.onerror=u.onload=null;g.width=u.width;g.height=u.height;a("<img />").attr({id:"fancybox-img",src:u.src,alt:g.title}).appendTo(b);I()};u.src=e;break;case "swf":g.scrolling="no";i='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"><param name="movie" value="'+e+'"></param>';
k="";a.each(g.swf,function(a,b){i+='<param name="'+a+'" value="'+b+'"></param>';k+=" "+a+'="'+b+'"'});i+='<embed src="'+e+'" type="application/x-shockwave-flash" width="'+g.width+'" height="'+g.height+'"'+k+"></embed></object>";b.html(i);y();break;case "ajax":n=!1;a.fancybox.showActivity();g.ajax.win=g.ajax.success;z=a.ajax(a.extend({},g.ajax,{url:e,data:g.ajax.data||{},error:function(a){a.status>0&&G()},success:function(a,d,f){if((typeof f=="object"?f:z).status==200){if(typeof g.ajax.win=="function")if(m=
g.ajax.win(e,a,d,f),m===!1){c.hide();return}else if(typeof m=="string"||typeof m=="object")a=m;b.html(a);y()}}}));break;case "iframe":I()}}else G()}},y=function(){var c=g.width,d=g.height,c=c.toString().indexOf("%")>-1?parseInt((a(window).width()-g.margin*2)*parseFloat(c)/100,10)+"px":c=="auto"?"auto":c+"px",d=d.toString().indexOf("%")>-1?parseInt((a(window).height()-g.margin*2)*parseFloat(d)/100,10)+"px":d=="auto"?"auto":d+"px";b.wrapInner('<div style="width:'+c+";height:"+d+";overflow: "+(g.scrolling==
"auto"?"auto":g.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');g.width=b.width();g.height=b.height();I()},I=function(){var H,M;c.hide();if(f.is(":visible")&&!1===e.onCleanup(p,h,e))a.event.trigger("fancybox-cancel"),n=!1;else{n=!0;a(l.add(d)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");f.is(":visible")&&e.titlePosition!=="outside"&&f.css("height",f.height());p=j;h=q;e=g;if(e.overlayShow){if(d.css({"background-color":e.overlayColor,opacity:e.overlayOpacity,
cursor:e.hideOnOverlayClick?"pointer":"auto",height:a(document).height()}),!d.is(":visible")){if(E)a("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});d.show()}}else d.hide();o=P();v=e.title||"";w=0;m.empty().removeAttr("style").removeClass();if(e.titleShow!==!1&&(v=a.isFunction(e.titleFormat)?e.titleFormat(v,p,h,e):v&&v.length?e.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+
v+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+e.titlePosition+'">'+v+"</div>":!1)&&v!=="")switch(m.addClass("fancybox-title-"+e.titlePosition).html(v).appendTo("body").show(),e.titlePosition){case "inside":m.css({width:o.width-e.padding*2,marginLeft:e.padding,marginRight:e.padding});w=m.outerHeight(!0);m.appendTo(k);o.height+=w;break;case "over":m.css({marginLeft:e.padding,width:o.width-e.padding*2,bottom:e.padding}).appendTo(k);break;case "float":m.css("left",
parseInt((m.width()-o.width-40)/2,10)*-1).appendTo(f);break;default:m.css({width:o.width-e.padding*2,paddingLeft:e.padding,paddingRight:e.padding}).appendTo(f)}m.hide();if(f.is(":visible"))a(i.add(r).add(t)).hide(),H=f.position(),s={top:H.top,left:H.left,width:f.width(),height:f.height()},M=s.width==o.width&&s.height==o.height,l.fadeTo(e.changeFade,0.3,function(){var c=function(){l.html(b.contents()).fadeTo(e.changeFade,1,J)};a.event.trigger("fancybox-change");l.empty().removeAttr("filter").css({"border-width":e.padding,
width:o.width-e.padding*2,height:g.autoDimensions?"auto":o.height-w-e.padding*2});M?c():(x.prop=0,a(x).animate({prop:1},{duration:e.changeSpeed,easing:e.easingChange,step:K,complete:c}))});else if(f.removeAttr("style"),l.css("border-width",e.padding),e.transitionIn=="elastic"){s=N();l.html(b.contents());f.show();if(e.opacity)o.opacity=0;x.prop=0;a(x).animate({prop:1},{duration:e.speedIn,easing:e.easingIn,step:K,complete:J})}else e.titlePosition=="inside"&&w>0&&m.show(),l.css({width:o.width-e.padding*
2,height:g.autoDimensions?"auto":o.height-w-e.padding*2}).html(b.contents()),f.css(o).fadeIn(e.transitionIn=="none"?0:e.speedIn,J)}},Q=function(){(e.enableEscapeButton||e.enableKeyboardNav)&&a(document).bind("keydown.fb",function(b){if(b.keyCode==27&&e.enableEscapeButton)b.preventDefault(),a.fancybox.close();else if((b.keyCode==37||b.keyCode==39)&&e.enableKeyboardNav&&b.target.tagName!=="INPUT"&&b.target.tagName!=="TEXTAREA"&&b.target.tagName!=="SELECT")b.preventDefault(),a.fancybox[b.keyCode==37?
"prev":"next"]()});e.showNavArrows?((e.cyclic&&p.length>1||h!==0)&&r.show(),(e.cyclic&&p.length>1||h!=p.length-1)&&t.show()):(r.hide(),t.hide())},J=function(){a.support.opacity||(l.get(0).style.removeAttribute("filter"),f.get(0).style.removeAttribute("filter"));g.autoDimensions&&l.css("height","auto");f.css("height","auto");v&&v.length&&m.show();e.showCloseButton&&i.show();Q();e.hideOnContentClick&&l.bind("click",a.fancybox.close);e.hideOnOverlayClick&&d.bind("click",a.fancybox.close);a(window).bind("resize.fb",
a.fancybox.resize);e.centerOnScroll&&a(window).bind("scroll.fb",a.fancybox.center);e.type=="iframe"&&a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+g.scrolling+'" src="'+e.href+'"></iframe>').appendTo(l);f.show();n=!1;a.fancybox.center();e.onComplete(p,h,e);var b,c;if(p.length-1>h&&(b=p[h+1].href,typeof b!=="undefined"&&b.match(B)))c=new Image,c.src=b;if(h>0&&(b=p[h-1].href,typeof b!==
"undefined"&&b.match(B)))c=new Image,c.src=b},K=function(a){var b={width:parseInt(s.width+(o.width-s.width)*a,10),height:parseInt(s.height+(o.height-s.height)*a,10),top:parseInt(s.top+(o.top-s.top)*a,10),left:parseInt(s.left+(o.left-s.left)*a,10)};if(typeof o.opacity!=="undefined")b.opacity=a<0.5?0.5:a;f.css(b);l.css({width:b.width-e.padding*2,height:b.height-w*a-e.padding*2})},L=function(){return[a(window).width()-e.margin*2,a(window).height()-e.margin*2,a(document).scrollLeft()+e.margin,a(document).scrollTop()+
e.margin]},P=function(){var a=L(),b={},c=e.autoScale,d=e.padding*2;b.width=e.width.toString().indexOf("%")>-1?parseInt(a[0]*parseFloat(e.width)/100,10):e.width+d;b.height=e.height.toString().indexOf("%")>-1?parseInt(a[1]*parseFloat(e.height)/100,10):e.height+d;if(c&&(b.width>a[0]||b.height>a[1]))if(g.type=="image"||g.type=="swf"){c=e.width/e.height;if(b.width>a[0])b.width=a[0],b.height=parseInt((b.width-d)/c+d,10);if(b.height>a[1])b.height=a[1],b.width=parseInt((b.height-d)*c+d,10)}else b.width=Math.min(b.width,
a[0]),b.height=Math.min(b.height,a[1]);b.top=parseInt(Math.max(a[3]-20,a[3]+(a[1]-b.height-40)*0.5),10);b.left=parseInt(Math.max(a[2]-20,a[2]+(a[0]-b.width-40)*0.5),10);return b},N=function(){var b=g.orig?a(g.orig):!1,c={};b&&b.length?(c=b.offset(),c.top+=parseInt(b.css("paddingTop"),10)||0,c.left+=parseInt(b.css("paddingLeft"),10)||0,c.top+=parseInt(b.css("border-top-width"),10)||0,c.left+=parseInt(b.css("border-left-width"),10)||0,c.width=b.width(),c.height=b.height(),c={width:c.width+e.padding*
2,height:c.height+e.padding*2,top:c.top-e.padding-20,left:c.left-e.padding-20}):(b=L(),c={width:e.padding*2,height:e.padding*2,top:parseInt(b[3]+b[1]*0.5,10),left:parseInt(b[2]+b[0]*0.5,10)});return c},R=function(){c.is(":visible")?(a("div",c).css("top",D*-40+"px"),D=(D+1)%12):clearInterval(C)};a.fn.fancybox=function(b){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},b,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(b){b.preventDefault();n||(n=!0,
a(this).blur(),j=[],q=0,b=a(this).attr("rel")||"",!b||b==""||b==="nofollow"?j.push(this):(j=a("a[rel="+b+"], area[rel="+b+"]"),q=j.index(this)),A())});return this};a.fancybox=function(b,c){var d;if(!n){n=!0;d=typeof c!=="undefined"?c:{};j=[];q=parseInt(d.index,10)||0;if(a.isArray(b)){for(var e=0,f=b.length;e<f;e++)typeof b[e]=="object"?a(b[e]).data("fancybox",a.extend({},d,b[e])):b[e]=a({}).data("fancybox",a.extend({content:b[e]},d));j=jQuery.merge(j,b)}else typeof b=="object"?a(b).data("fancybox",
a.extend({},d,b)):b=a({}).data("fancybox",a.extend({content:b},d)),j.push(b);if(q>j.length||q<0)q=0;A()}};a.fancybox.showActivity=function(){clearInterval(C);c.show();C=setInterval(R,66)};a.fancybox.hideActivity=function(){c.hide()};a.fancybox.next=function(){return a.fancybox.pos(h+1)};a.fancybox.prev=function(){return a.fancybox.pos(h-1)};a.fancybox.pos=function(a){n||(a=parseInt(a),j=p,a>-1&&a<p.length?(q=a,A()):e.cyclic&&p.length>1&&(q=a>=p.length?0:p.length-1,A()))};a.fancybox.cancel=function(){n||
(n=!0,a.event.trigger("fancybox-cancel"),F(),g.onCancel(j,q,g),n=!1)};a.fancybox.close=function(){function b(){d.fadeOut("fast");m.empty().hide();f.hide();a.event.trigger("fancybox-cleanup");l.empty();e.onClosed(p,h,e);p=g=[];h=q=0;e=g={};n=!1}if(!n&&!f.is(":hidden"))if(n=!0,e&&!1===e.onCleanup(p,h,e))n=!1;else if(F(),a(i.add(r).add(t)).hide(),a(l.add(d)).unbind(),a(window).unbind("resize.fb scroll.fb"),a(document).unbind("keydown.fb"),l.find("iframe").attr("src",E&&/^https/i.test(window.location.href||
"")?"javascript:void(false)":"about:blank"),e.titlePosition!=="inside"&&m.empty(),f.stop(),e.transitionOut=="elastic"){s=N();var c=f.position();o={top:c.top,left:c.left,width:f.width(),height:f.height()};if(e.opacity)o.opacity=1;m.empty().hide();x.prop=1;a(x).animate({prop:0},{duration:e.speedOut,easing:e.easingOut,step:K,complete:b})}else f.fadeOut(e.transitionOut=="none"?0:e.speedOut,b)};a.fancybox.resize=function(){d.is(":visible")&&d.css("height",a(document).height());a.fancybox.center(!0)};a.fancybox.center=
function(a){var b,c;if(!n&&(c=a===!0?1:0,b=L(),c||!(f.width()>b[0]||f.height()>b[1])))f.stop().animate({top:parseInt(Math.max(b[3]-20,b[3]+(b[1]-l.height()-40)*0.5-e.padding)),left:parseInt(Math.max(b[2]-20,b[2]+(b[0]-l.width()-40)*0.5-e.padding))},typeof a=="number"?a:200)};a.fancybox.init=function(){a("#fancybox-wrap").length||(a("body").append(b=a('<div id="fancybox-tmp"></div>'),c=a('<div id="fancybox-loading"><div></div></div>'),d=a('<div id="fancybox-overlay"></div>'),f=a('<div id="fancybox-wrap"></div>')),
k=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(f),k.append(l=a('<div id="fancybox-content"></div>'),
i=a('<a id="fancybox-close"></a>'),m=a('<div id="fancybox-title"></div>'),r=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),t=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),i.click(a.fancybox.close),c.click(a.fancybox.cancel),r.click(function(b){b.preventDefault();a.fancybox.prev()}),t.click(function(b){b.preventDefault();a.fancybox.next()}),a.fn.mousewheel&&f.bind("mousewheel.fb",
function(b,c){if(n)b.preventDefault();else if(a(b.target).get(0).clientHeight==0||a(b.target).get(0).scrollHeight===a(b.target).get(0).clientHeight)b.preventDefault(),a.fancybox[c>0?"prev":"next"]()}),a.support.opacity||f.addClass("fancybox-ie"),E&&(c.addClass("fancybox-ie6"),f.addClass("fancybox-ie6"),a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(k)))};
a.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,
showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(document).ready(function(){a.fancybox.init()})})(jQuery);var MD5=function(a){function b(a,b){var c,d,e,f,g;e=a&2147483648;f=b&2147483648;c=a&1073741824;d=b&1073741824;g=(a&1073741823)+(b&1073741823);return c&d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f}function c(a,c,d,e,f,g,h){a=b(a,b(b(c&d|~c&e,f),h));return b(a<<g|a>>>32-g,c)}function d(a,c,d,e,f,g,h){a=b(a,b(b(c&e|d&~e,f),h));return b(a<<g|a>>>32-g,c)}function f(a,c,d,e,f,g,h){a=b(a,b(b(c^d^e,f),h));return b(a<<g|a>>>32-g,c)}function k(a,c,d,e,f,g,h){a=b(a,b(b(d^(c|~e),
f),h));return b(a<<g|a>>>32-g,c)}function l(a){var b="",c="",d;for(d=0;d<=3;d++)c=a>>>d*8&255,c="0"+c.toString(16),b+=c.substr(c.length-2,2);return b}var i=[],m,r,t,q,g,j,h,e,a=function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):(d>127&&d<2048?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a),i=function(a){var b,c=a.length;b=
c+8;for(var d=((b-b%64)/64+1)*16,e=Array(d-1),f=0,g=0;g<c;)b=(g-g%4)/4,f=g%4*8,e[b]|=a.charCodeAt(g)<<f,g++;e[(g-g%4)/4]|=128<<g%4*8;e[d-2]=c<<3;e[d-1]=c>>>29;return e}(a);g=1732584193;j=4023233417;h=2562383102;e=271733878;for(a=0;a<i.length;a+=16)m=g,r=j,t=h,q=e,g=c(g,j,h,e,i[a+0],7,3614090360),e=c(e,g,j,h,i[a+1],12,3905402710),h=c(h,e,g,j,i[a+2],17,606105819),j=c(j,h,e,g,i[a+3],22,3250441966),g=c(g,j,h,e,i[a+4],7,4118548399),e=c(e,g,j,h,i[a+5],12,1200080426),h=c(h,e,g,j,i[a+6],17,2821735955),j=
c(j,h,e,g,i[a+7],22,4249261313),g=c(g,j,h,e,i[a+8],7,1770035416),e=c(e,g,j,h,i[a+9],12,2336552879),h=c(h,e,g,j,i[a+10],17,4294925233),j=c(j,h,e,g,i[a+11],22,2304563134),g=c(g,j,h,e,i[a+12],7,1804603682),e=c(e,g,j,h,i[a+13],12,4254626195),h=c(h,e,g,j,i[a+14],17,2792965006),j=c(j,h,e,g,i[a+15],22,1236535329),g=d(g,j,h,e,i[a+1],5,4129170786),e=d(e,g,j,h,i[a+6],9,3225465664),h=d(h,e,g,j,i[a+11],14,643717713),j=d(j,h,e,g,i[a+0],20,3921069994),g=d(g,j,h,e,i[a+5],5,3593408605),e=d(e,g,j,h,i[a+10],9,38016083),
h=d(h,e,g,j,i[a+15],14,3634488961),j=d(j,h,e,g,i[a+4],20,3889429448),g=d(g,j,h,e,i[a+9],5,568446438),e=d(e,g,j,h,i[a+14],9,3275163606),h=d(h,e,g,j,i[a+3],14,4107603335),j=d(j,h,e,g,i[a+8],20,1163531501),g=d(g,j,h,e,i[a+13],5,2850285829),e=d(e,g,j,h,i[a+2],9,4243563512),h=d(h,e,g,j,i[a+7],14,1735328473),j=d(j,h,e,g,i[a+12],20,2368359562),g=f(g,j,h,e,i[a+5],4,4294588738),e=f(e,g,j,h,i[a+8],11,2272392833),h=f(h,e,g,j,i[a+11],16,1839030562),j=f(j,h,e,g,i[a+14],23,4259657740),g=f(g,j,h,e,i[a+1],4,2763975236),
e=f(e,g,j,h,i[a+4],11,1272893353),h=f(h,e,g,j,i[a+7],16,4139469664),j=f(j,h,e,g,i[a+10],23,3200236656),g=f(g,j,h,e,i[a+13],4,681279174),e=f(e,g,j,h,i[a+0],11,3936430074),h=f(h,e,g,j,i[a+3],16,3572445317),j=f(j,h,e,g,i[a+6],23,76029189),g=f(g,j,h,e,i[a+9],4,3654602809),e=f(e,g,j,h,i[a+12],11,3873151461),h=f(h,e,g,j,i[a+15],16,530742520),j=f(j,h,e,g,i[a+2],23,3299628645),g=k(g,j,h,e,i[a+0],6,4096336452),e=k(e,g,j,h,i[a+7],10,1126891415),h=k(h,e,g,j,i[a+14],15,2878612391),j=k(j,h,e,g,i[a+5],21,4237533241),
g=k(g,j,h,e,i[a+12],6,1700485571),e=k(e,g,j,h,i[a+3],10,2399980690),h=k(h,e,g,j,i[a+10],15,4293915773),j=k(j,h,e,g,i[a+1],21,2240044497),g=k(g,j,h,e,i[a+8],6,1873313359),e=k(e,g,j,h,i[a+15],10,4264355552),h=k(h,e,g,j,i[a+6],15,2734768916),j=k(j,h,e,g,i[a+13],21,1309151649),g=k(g,j,h,e,i[a+4],6,4149444226),e=k(e,g,j,h,i[a+11],10,3174756917),h=k(h,e,g,j,i[a+2],15,718787259),j=k(j,h,e,g,i[a+9],21,3951481745),g=b(g,m),j=b(j,r),h=b(h,t),e=b(e,q);return(l(g)+l(j)+l(h)+l(e)).toLowerCase()};var AjaxSolrUno;
(function(a){a.defaultSearch=function(){a.search({filter:{collection:"utdanning"},per_page:25,collection:"dismax"});a("#currentsearch").currentSearch();a("#level").facet("niva");a("#sublevel").facet("underniva");a("#fagomrade").facet("fagomrade");a("#undervisningsform").facet("undervisningsform");a("#adminarea").facet("fylke");a("#interesser").facet("labelInteresse");a("#search").searchBox();a("#pager-header").searchRows();a("#result").searchResult();a("#pager").searchPager();a("#per_page").searchPerPage();a("#sorting").searchSort();
a.doRequest()};a.fn.searchResult=function(b){var c=a.extend({},b);return a(this).each(function(){a(this).addClass("solr-element");c.id=a(this).attr("id");c.target="#"+a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.ResultWidget(c))})};a.fn.searchRows=function(){return a(this).each(function(){a(this).addClass("solr-element");var b={id:a(this).attr("id"),target:"#"+a(this).attr("id")};AjaxSolrUno.addWidget(new AjaxSolr.HitDescriptionWidget(b))})};a.fn.searchPager=function(b){var c=a.extend({prevLabel:"&lt;",
nextLabel:"&gt;",innerWindow:5},b);return a(this).each(function(){a(this).addClass("solr-element");c.id=a(this).attr("id");c.target="#"+a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.PagerWidget(c))})};a.fn.searchSort=function(){var b={};for(key in AjaxSolrUno.sortMapping){var c=AjaxSolrUno.sortMapping[key];b[key]={label:AjaxSolrUno.sortMapping[key].label,queryValue:c.id+" "+c.defaultOrder}}var d={options:b,variable:"sort"};return a(this).each(function(){d.id=a(this).attr("id");d.target="#"+
a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.SelectWidget(d))})};a.fn.searchPerPage=function(b){var c=a.extend({values:[10,25,50],variable:"rows"},b);return a(this).each(function(){c.id=a(this).attr("id");c.target="#"+a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.SelectWidget(c))})};a.fn.facet=function(b){if(!AjaxSolrUno.facetInit){var c={facet:!0,"facet.mincount":1,"facet.sort":"alpha","json.nl":"map","f.labelLevel.facet.sort":"count","f.labelLevel1.facet.sort":"count","f.labelFormOfTeaching.facet.sort":"count",
"f.labelVideregende_studieprogram.facet.mincount":3};AjaxSolrUno.facetInit=!0}b=AjaxSolrUno.filterMapping[b]?AjaxSolrUno.filterMapping[b].prefix:b;return a(this).each(function(){AjaxSolrUno.facetLabels[b]=a(this).find("h2").text();var d={id:a(this).attr("id"),target:"#"+a(this).attr("id"),field:b},f;for(f in c)AjaxSolrUno.manager.store.addByValue(f,c[f]);b=="fagomrade"?AjaxSolrUno.addWidget(new AjaxSolr.LevelWidget(d)):(AjaxSolrUno.manager.store.addByValue("facet.field",b),AjaxSolrUno.addWidget(new AjaxSolr.FacetWidget(d)))})};
a.fn.currentSearch=function(b){var c=a.extend({},b);return a(this).each(function(){c.id=a(this).attr("id");c.target="#"+a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.CurrentSearchWidget(c))})};a.fn.searchBox=function(b){var c=a.extend({},b);return a(this).each(function(){c.id=a(this).attr("id");c.target="#"+a(this).attr("id");AjaxSolrUno.addWidget(new AjaxSolr.TextWidget(c))})};a.fn.searchForm=function(b){return!b?null:a(this).each(function(){var c=a("<form>").submit(function(c){c.preventDefault();
location.href=b+"#&q="+a(this).find(".keywords").val()}).appendTo(a(this));a("<a>").attr("href","http://utdanning.no").addClass("utd-logo-liten").text("utdanning.no").appendTo(c);a("<input>").attr("type","text").addClass("keywords").appendTo(c);a("<input>").attr("type","submit").attr("value","S\u00f8k").appendTo(c)})};a.search=function(b){b=a.extend({collection:"yrke",sort:{relevans:"desc"},queryVars:[],keywords_label:"Du har s\u00f8kt",remove_all_label:"Fjern alle",hits_description_label:"Viser [from] - [to] av [total] treff",
style:"fields",use_lightbox:!1,show_facet_numbers:!1,show_selected_facets:!1,onResult:function(){}},b);a.searchSettings=b;if(b.filter)for(key in b.filter)b.queryVars[b.queryVars.length]={variable:AjaxSolrUno.filterMapping[key]?AjaxSolrUno.filterMapping[key].variable:"fq",value:key+(key!=""?":":"")+b.filter[key]};if(b.sort)for(key in b.sort){var c=b.sort[key].toLowerCase(),c=c=="asc"||c=="desc"?c:"asc";b.queryVars[b.queryVars.length]={variable:"sort",value:AjaxSolrUno.sortMapping[key].id+" "+c}}b.per_page&&
typeof b.per_page=="number"&&(b.queryVars[b.queryVars.length]={variable:"rows",value:b.per_page});a("<iframe>").css({width:"0",height:"0"}).attr("id","analytics_iframe").attr("frameborder","0").appendTo(a("body"));AjaxSolrUno.init(b)};a.doRequest=function(){AjaxSolrUno.updateFromHash();window.location.hash||AjaxSolrUno.doRequest();a(window).bind("hashchange",function(){AjaxSolrUno.updateFromHash()})};AjaxSolrUno={oldHash:"",facetInit:!1,logo:"http://service.utdanning.no/js/img/utd-logo.png",includesLogo:!1,
settings:[],filterMapping:{niva:{variable:"fq",prefix:"labelLevel"},underniva:{variable:"fq",prefix:"labelLevel1"},undervisningsform:{variable:"fq",prefix:"labelFormOfTeaching"},pace:{variable:"fq",prefix:"labelPace"},fylke:{variable:"fq",prefix:"labelOrgAdminarea"},undervisningssted:{variable:"fq",prefix:"labelOrgName"},interesse:{variable:"fq",prefix:"labelInteresse"},keywords:{variable:"q",prefix:""}},sortMapping:{title:{id:"realTitle",label:"Tittel",defaultOrder:"asc"},relevans:{id:"score",label:"Relevans",
defaultOrder:"desc"},date:{id:"updated",label:"Dato",defaultOrder:"desc"}},facetLabels:{},init:function(a){AjaxSolrUno.manager=new AjaxSolr.Manager({solrUrl:"http://service.utdanning.no/finn/solr-back-end.php/",servlet:a.collection});AjaxSolrUno.settings=a;AjaxSolrUno.manager.init();AjaxSolrUno.applyDefaultFilters()},applyDefaultFilters:function(){for(var a=0;a<AjaxSolrUno.settings.queryVars.length;a++){var c=AjaxSolrUno.settings.queryVars[a];AjaxSolrUno.manager.store.addByValue(c.variable,c.value)}},
addWidget:function(a){AjaxSolrUno.manager.addWidget(a);a.init()},doRequest:function(b){a(".solr-element").html("");var c=/:\/\/([^\/]+)\//.exec(location.href),d=c?c[1]:"local_file";window.location.hash.indexOf("&sort=")==-1&&(this.manager.store.values("q").length==0||!this.manager.store.values("q")[0]||this.manager.store.values("q")[0].length==0?this.manager.store.addByValue("sort","realTitle asc"):this.manager.store.addByValue("sort","score desc"));for(var f=this.manager.store.values("fq"),c="http://service.utdanning.no/finn/analytics.php/"+
d,k=0,l=f.length;k<l;k++){var i=f[k].split(":"),m=i[0],i=i[1].replace(/\"/g,"");c+="/"+m+"="+i}f=this.manager.store.values("q");f!=""&&(c+="?q="+f);a.getJSON("http://service.utdanning.no/finn/licence.php/"+d+"?json.wrf=?",function(c){c.key==MD5(d+"9C6C2BBE-F664-487F-B9DD-E043B9BE8E72")&&(b!=null?AjaxSolrUno.manager.doRequest(b):AjaxSolrUno.manager.doRequest(),scrollTo(0,0));a.ajaxSetup({cache:!1})});a("#analytics_iframe").attr("src",c)},updateFromHash:function(){if(AjaxSolrUno.oldHash!=window.location.hash){if(AjaxSolrUno.oldHash)for(var b=
AjaxSolrUno.oldHash.substring(1),b=b.split("&"),c=0;c<b.length;c++)if(b[c].length!=0){var d=b[c].split("=");AjaxSolrUno.manager.store.removeByValue(d[0],d[1]);d[0]=="q"&&a(".current_keywords").text("")}if(window.location.hash){b=decodeURI(window.location.hash.substring(1));b=b.split("&");for(c=0;c<b.length;c++)b[c].length!=0&&(d=b[c].split("="),d[0]=="page"&&(perPage=AjaxSolrUno.manager.store.get("rows").val()||10,d[0]="start",d[1]=(d[1]-1)*perPage),AjaxSolrUno.manager.store.addByValue(d[0],d[1]));
AjaxSolrUno.oldHash=window.location.hash}AjaxSolrUno.doRequest()}},iframeLoaded:function(){a.fancybox.hideActivity();a("#fancybox-wrap").css("top","20px").removeClass("loading");a("#fancybox-wrap").find("iframe")[0].contentWindow.resizeiframe()},resizeFancybox:function(b){a("#fancybox-content").css("height",b+"px");a("#fancybox-overlay").css("height",0);a("#fancybox-overlay").css("height",a(document).height())}}})(jQuery);AjaxSolr=function(){};AjaxSolr.Class=function(){};AjaxSolr.Class.extend=function(a){var b=this,c=function(c){AjaxSolr.extend(this,new b(c),a,c)};c.extend=this.extend;return c};AjaxSolr.size=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};
AjaxSolr.equals=function(a,b){if(AjaxSolr.isArray(a)&&AjaxSolr.isArray(b)){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}else return AjaxSolr.isRegExp(a)&&AjaxSolr.isString(b)?b.match(a):AjaxSolr.isRegExp(b)&&AjaxSolr.isString(a)?a.match(b):a===b};AjaxSolr.inArray=function(a,b){if(b)for(var c=0,d=b.length;c<d;c++)if(AjaxSolr.equals(b[c],a))return c;return-1};
AjaxSolr.flatten=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b=b.concat(AjaxSolr.isArray(a[c])?AjaxSolr.flatten(a[c]):a[c]);return b};AjaxSolr.grep=function(a,b){for(var c=[],d=0,f=a.length;d<f;d++)!b(a[d],d)===!1&&c.push(a[d]);return c};AjaxSolr.compact=function(a){return AjaxSolr.grep(a,function(a){return a.toString()})};AjaxSolr.isArray=function(a){return a!=null&&typeof a=="object"&&"splice"in a&&"join"in a};
AjaxSolr.isRegExp=function(a){return a!=null&&(typeof a=="object"||typeof a=="function")&&"ignoreCase"in a};AjaxSolr.isString=function(a){return a!=null&&typeof a=="string"};AjaxSolr.theme=function(a){for(var b=1,c=[];b<arguments.length;b++)c.push(arguments[b]);try{return(AjaxSolr.theme[a]||AjaxSolr.theme.prototype[a]).apply(this,c)}catch(d){throw console&&console.log&&console.log('Theme function "'+a+'" is not defined.'),d;}};
AjaxSolr.extend=function(){for(var a=arguments[0]||{},b=1,c=arguments.length,d;b<c;b++)if((d=arguments[b])!=null)for(var f in d){var k=a[f],l=d[f];a!==l&&(l&&typeof l=="object"&&!l.nodeType?a[f]=AjaxSolr.extend(k||(l.length!=null?[]:{}),l):l&&k&&typeof l=="function"&&typeof k=="function"?a[f]=function(a,b){return function(){var c=this._super,d;this._super=a;d=b.apply(this,arguments);this._super=c;return d}}(k,l):l!==void 0&&(a[f]=l))}return a};AjaxSolr.theme.prototype.list_items=function(a,b,c){jQuery(a).empty();for(var d=0,f=b.length;d<f;d++){var k=jQuery("<li/>");if(AjaxSolr.isArray(b[d]))for(var l=0,i=b[d].length;l<i;l++)c&&l>0&&k.append(c),k.append(b[d][l]);else c&&d>0&&k.append(c),k.append(b[d]),typeof b[d]=="string"&&k.addClass("pager-gap");jQuery(a).append(k)}};AjaxSolr.AbstractManager=AjaxSolr.Class.extend({solrUrl:"http://localhost:8983/solr/",proxyUrl:null,servlet:"select",response:{},widgets:{},store:null,initialized:!1,init:function(){this.initialized=!0;this.store===null&&this.setStore(new AjaxSolr.ParameterStore);this.store.load(!1);for(var a in this.widgets)this.widgets[a].init();this.store.init()},setStore:function(a){a.manager=this;this.store=a},addWidget:function(a){a.manager=this;this.widgets[a.id]=a},doRequest:function(a,b){this.initialized===
!1&&this.init();a!==void 0&&this.store.get("start").val(a);if(b===void 0)b=this.servlet;this.store.save();for(var c in this.widgets)this.widgets[c].beforeRequest();this.executeRequest(b)},executeRequest:function(){throw"Abstract method executeRequest must be overridden in a subclass.";},handleResponse:function(a){this.response=a;for(var b in this.widgets)this.widgets[b].afterRequest()}});AjaxSolr.AbstractWidget=AjaxSolr.Class.extend({id:null,target:null,manager:null,init:function(){},beforeRequest:function(){},afterRequest:function(){}});AjaxSolr.AbstractFacetWidget=AjaxSolr.AbstractWidget.extend({field:null,multivalue:!0,init:function(){this.initStore()},initStore:function(){var a=["facet.prefix","facet.sort","facet.limit","facet.offset","facet.mincount","facet.missing","facet.method","facet.enum.cache.minDf"];this.manager.store.addByValue("facet",!0);this["facet.field"]!==void 0?this.manager.store.addByValue("facet.field",this.field):this["facet.date"]!==void 0?(this.manager.store.addByValue("facet.date",this.field),a=a.concat(["facet.date.start",
"facet.date.end","facet.date.gap","facet.date.hardend","facet.date.other","facet.date.include"])):this["facet.range"]!==void 0&&(this.manager.store.addByValue("facet.range",this.field),a=a.concat(["facet.range.start","facet.range.end","facet.range.gap","facet.range.hardend","facet.range.other","facet.range.include"]));for(var b=0,c=a.length;b<c;b++)this[a[b]]!==void 0&&this.manager.store.addByValue("f."+this.field+"."+a[b],this[a[b]])},isEmpty:function(){return!this.manager.store.find("fq",RegExp("^-?"+
this.field+":"))},set:function(){return this.changeSelection(function(){var a=this.manager.store.removeByValue("fq",RegExp("^-?"+this.field+":")),b=this.manager.store.addByValue("fq",this.fq(value));return a||b})},add:function(a){return this.changeSelection(function(){return this.manager.store.addByValue("fq",this.fq(a))})},remove:function(a){return this.changeSelection(function(){return this.manager.store.removeByValue("fq",this.fq(a))})},clear:function(){return this.changeSelection(function(){return this.manager.store.removeByValue("fq",
RegExp("^-?"+this.field+":"))})},changeSelection:function(a){(changed=a.apply(this))&&this.afterChangeSelection();return changed},afterChangeSelection:function(){},getFacetCounts:function(){var a;this["facet.field"]!==void 0?a="facet_fields":this["facet.date"]!==void 0?a="facet_dates":this["facet.range"]!==void 0&&(a="facet_ranges");if(a!==void 0)switch(this.manager.store.get("json.nl").val()){case "map":return this.getFacetCountsMap(a);case "arrarr":return this.getFacetCountsArrarr(a);default:return this.getFacetCountsFlat(a)}throw'Cannot get facet counts unless one of the following properties is set to "true" on widget "'+
this.id+'": "facet.field", "facet.date", or "facet.range".';},getFacetCountsMap:function(a){var b=[],c;for(c in this.manager.response.facet_counts[a][this.field])b.push({facet:c,count:parseInt(this.manager.response.facet_counts[a][this.field][c])});return b},getFacetCountsArrarr:function(a){for(var b=[],c=0,d=this.manager.response.facet_counts[a][this.field].length;c<d;c++)b.push({facet:this.manager.response.facet_counts[a][this.field][c][0],count:parseInt(this.manager.response.facet_counts[a][this.field][c][1])});
return b},getFacetCountsFlat:function(a){for(var b=[],c=0,d=this.manager.response.facet_counts[a][this.field].length;c<d;c+=2)b.push({facet:this.manager.response.facet_counts[a][this.field][c],count:parseInt(this.manager.response.facet_counts[a][this.field][c+1])});return b},clickHandler:function(a){var b=this,c=this.multivalue?"add":"set";return function(){b[c].call(b,a)&&b.manager.doRequest(0);return!1}},unclickHandler:function(a){var b=this;return function(){b.remove(a)&&b.manager.doRequest(0);
return!1}},fq:function(a,b){a.match(/[ :]/)&&!a.match(/[\[\{]\S+ TO \S+[\]\}]/)&&(a='"'+a+'"');return(b?"-":"")+this.field+":"+a}});AjaxSolr.AbstractTextWidget=AjaxSolr.AbstractWidget.extend({set:function(a){return this.changeSelection(function(){this.manager.store.get("q").val(a)})},clear:function(){return this.changeSelection(function(){this.manager.store.remove("q")})},changeSelection:function(a){var b=this.manager.store.get("q").val();a.apply(this);a=this.manager.store.get("q").val();a!==b&&this.afterChangeSelection(a);return a!==b},afterChangeSelection:function(){},unclickHandler:function(){var a=this;return function(){a.clear()&&
a.manager.doRequest(0);return!1}},clickHandler:function(a){var b=this;return function(){b.set(a)&&b.manager.doRequest(0);return!1}}});AjaxSolr.Parameter=AjaxSolr.Class.extend({name:null,value:null,locals:{},val:function(a){if(a===void 0)return this.value;else this.value=a},local:function(a,b){if(b===void 0)return this.locals[a];else this.locals[a]=b},remove:function(a){delete this.locals[a]},string:function(){var a=[],b;for(b in this.locals)this.locals[b]&&a.push(b+"="+encodeURIComponent(this.locals[b]));a=a.length?"{!"+a.join("%20")+"}":"";return this.value?this.name+"="+a+this.valueString(this.value):this.name=="q"&&a?"q.alt="+
a+encodeURIComponent("*:*"):""},parseString:function(a){if(a=a.match(/^([^=]+)=(?:\{!([^\}]*)\})?(.*)$/)){for(var b;b=/([^\s=]+)=(\S*)/g.exec(decodeURIComponent(a[2]));)this.locals[b[1]]=decodeURIComponent(b[2]),a[2]=a[2].replace(b[0],"");a[1]=="q.alt"?this.name="q":(this.name=a[1],this.value=this.parseValueString(a[3]))}},valueString:function(a){a=AjaxSolr.isArray(a)?a.join(","):a;return encodeURIComponent(a)},parseValueString:function(a){a=decodeURIComponent(a);return a.indexOf(",")==-1?a:a.split(",")}});AjaxSolr.ParameterStore=AjaxSolr.Class.extend({exposed:[],params:{},manager:null,init:function(){},isMultiple:function(a){return a.match(/^(?:bf|bq|facet\.date|facet\.date\.other|facet\.date\.include|facet\.field|facet\.pivot|facet\.range|facet\.range\.other|facet\.range\.include|facet\.query|fq|pf|qf)$/)},get:function(a){if(this.params[a]===void 0){var b=new AjaxSolr.Parameter({name:a});this.params[a]=this.isMultiple(a)?[b]:b}return this.params[a]},values:function(a){if(this.params[a]!==void 0)if(this.isMultiple(a)){for(var b=
[],c=0,d=this.params[a].length;c<d;c++)b.push(this.params[a][c].val());return b}else return[this.params[a].val()];return[]},add:function(a,b){b===void 0&&(b=new AjaxSolr.Parameter({name:a}));if(this.isMultiple(a))if(this.params[a]===void 0)this.params[a]=[b];else if(AjaxSolr.inArray(b.val(),this.values(a))==-1)this.params[a].push(b);else return!1;else this.params[a]=b;return b},remove:function(a,b){b===void 0?delete this.params[a]:(this.params[a].splice(b,1),this.params[a].length==0&&delete this.params[a])},
find:function(a,b){if(this.params[a]!==void 0)if(this.isMultiple(a)){for(var c=[],d=0,f=this.params[a].length;d<f;d++)AjaxSolr.equals(this.params[a][d].val(),b)&&c.push(d);return c.length?c:!1}else if(AjaxSolr.equals(this.params[a].val(),b))return a;return!1},addByValue:function(a,b){if(this.isMultiple(a)&&AjaxSolr.isArray(b)){for(var c=[],d=0,f=b.length;d<f;d++)c.push(this.add(a,new AjaxSolr.Parameter({name:a,value:b[d]})));return c}else return this.add(a,new AjaxSolr.Parameter({name:a,value:b}))},
removeByValue:function(a,b){var c=this.find(a,b);if(c)if(AjaxSolr.isArray(c))for(var d=c.length-1;d>=0;d--)this.remove(a,c[d]);else this.remove(c);return c},string:function(){var a=[],b;for(b in this.params)if(this.isMultiple(b))for(var c=0,d=this.params[b].length;c<d;c++)a.push(this.params[b][c].string());else a.push(this.params[b].string());return AjaxSolr.compact(a).join("&")},parseString:function(a){for(var a=a.split("&"),b=0,c=a.length;b<c;b++)if(a[b]){var d=new AjaxSolr.Parameter;d.parseString(a[b]);
this.add(d.name,d)}},exposedString:function(){for(var a=[],b=0,c=this.exposed.length;b<c;b++)if(this.params[this.exposed[b]]!==void 0)if(this.isMultiple(this.exposed[b]))for(var d=0,f=this.params[this.exposed[b]].length;d<f;d++)a.push(this.params[this.exposed[b]][d].string());else a.push(this.params[this.exposed[b]].string());return AjaxSolr.compact(a).join("&")},exposedReset:function(){for(var a=0,b=this.exposed.length;a<b;a++)this.remove(this.exposed[a])},load:function(a){a===void 0&&(a=!0);a&&
this.exposedReset();this.parseString(this.storedString())},save:function(){},storedString:function(){return""}});AjaxSolr.Manager=AjaxSolr.AbstractManager.extend({executeRequest:function(a){var b=this;this.proxyUrl?jQuery.post(this.proxyUrl,{query:this.store.string()},function(a){b.handleResponse(a)},"json"):jQuery.getJSON(this.solrUrl+a+"?"+this.store.string()+"&wt=json&json.wrf=?",{},function(a){b.handleResponse(a)})}});(function(a){AjaxSolr.PagerWidget=AjaxSolr.AbstractWidget.extend({innerWindow:4,outerWindow:1,prevLabel:"&laquo; Previous",nextLabel:"Next &raquo;",separator:" ",currentPage:null,totalPages:null,gapMarker:function(){return'<span class="pager-gap">&hellip;</span>'},windowedLinks:function(){var a=[],c=null;visible=this.visiblePageNumbers();for(var d=0,f=visible.length;d<f;d++)c&&visible[d]>c+1&&a.push(this.gapMarker()),a.push(this.pageLinkOrSpan(visible[d],["pager-current"])),c=visible[d];return a},
visiblePageNumbers:function(){var a=this.currentPage-this.innerWindow,c=this.currentPage+this.innerWindow;if(c>this.totalPages)a=Math.max(0,a-(c-this.totalPages)),c=this.totalPages;a<1&&(c=Math.min(this.totalPages,c+(1-a)),a=1);var d=[];d.push(1);for(var f=2;f<=Math.min(1+this.outerWindow,a-1);f++)d.push(f);1+this.outerWindow==a-2&&d.push(a-1);for(f=Math.max(2,a);f<=Math.min(c,this.totalPages-1);f++)d.push(f);this.totalPages-this.outerWindow==c+2&&d.push(c+1);for(f=Math.max(this.totalPages-this.outerWindow,
c+1);f<this.totalPages;f++)d.push(f);this.totalPages>1&&d.push(this.totalPages);return d},pageLinkOrSpan:function(b,c,d){d=d||b;return b&&b!=this.currentPage?a('<a href="#"/>').html(d).attr("rel",this.relValue(b)).addClass(c[1]).click(this.clickHandler(b)):a("<span/>").html(d).addClass(c.join(" "))},clickHandler:function(a){var c=this;return function(){c.manager.store.get("start").val((a-1)*(c.manager.response.responseHeader.params&&c.manager.response.responseHeader.params.rows||10));AjaxSolrUno.doRequest();
var d=window.location.hash?window.location.hash:"#",d=d.replace(/\&page\=[0-9]*/g,"");c.manager.store.get("start").val()>0&&(perPage=c.manager.store.get("rows").val()||10,d=d+"&page="+(c.manager.store.get("start").val()/perPage+1));AjaxSolrUno.oldHash=d;window.location.hash=d;return!1}},relValue:function(a){switch(a){case this.previousPage():return"prev"+(a==1?"start":"");case this.nextPage():return"next";case 1:return"start";default:return""}},previousPage:function(){return this.currentPage>1?this.currentPage-
1:null},nextPage:function(){return this.currentPage<this.totalPages?this.currentPage+1:null},renderHeader:function(){},renderLinks:function(b){if(this.totalPages){b.unshift(this.pageLinkOrSpan(this.previousPage(),["pager-disabled","pager-prev"],this.prevLabel));b.push(this.pageLinkOrSpan(this.nextPage(),["pager-disabled","pager-next"],this.nextLabel));var c=a("<ul>").addClass("pager").appendTo(a(this.target));AjaxSolr.theme("list_items",c,b,this.separator)}},afterRequest:function(){var b=parseInt(this.manager.response.responseHeader.params&&
this.manager.response.responseHeader.params.rows||10),c=parseInt(this.manager.response.responseHeader.params&&this.manager.response.responseHeader.params.start||0),d=parseInt(this.manager.response.response.numFound);c-=c%b;this.currentPage=Math.ceil((c+1)/b);this.totalPages=Math.ceil(d/b);a(this.target).empty();this.totalPages>1&&this.renderLinks(this.windowedLinks());this.renderHeader(b,c,d)}})})(jQuery);(function(a){AjaxSolr.CurrentSearchWidget=AjaxSolr.AbstractWidget.extend({init:function(){AjaxSolrUno.labelTarget=this.target;a(this.target).append('<div class="current_keywords">');a(this.target).append('<ul class="current_facets_content">');a(this.target).addClass("current_facets")},afterRequest:function(){for(var b=this,c=[],d=this.manager.store.values("fq"),f=0,k=d.length;f<k;f++){var l=d[f].split(":"),i=AjaxSolrUno.facetLabels[l[0]]?AjaxSolrUno.facetLabels[l[0]]:l[0],l=l[1].replace(/\"/g,"");
(typeof a.searchSettings.filter=="undefined"||!a.searchSettings.filter[i])&&c.push(a('<a href="#" class="remove_link"/>').html('<span class="remove_marker">(x)</span> '+l).click(b.removeFacet(d[f])))}(c.length>1||b.manager.store.get("q").value&&b.manager.store.get("q").value!=""&&c.length>0)&&c.push(a('<a href="#" class="remove_all_link"/>').text(a.searchSettings.remove_all_label).click(function(){b.manager.store.remove("fq");b.manager.store.get("q").val("");AjaxSolrUno.applyDefaultFilters();AjaxSolrUno.doRequest(0);
var c=window.location.hash;a(this.target).find(".current_keywords").clear();c=c.replace(/\&q\=[^\&]*/,"");c=c.replace(/\&fq\=[^\&]*/g,"");c=c.replace(/\&start\=[0-9]*/g,"");AjaxSolrUno.oldHash=c;window.location.hash=c;return!1}));c.length?(AjaxSolr.theme("list_items",this.target+" .current_facets_content",c),a(this.target).css("display","block")):this.manager.store.get("q").value?(a(this.target).find(".current_facets_content").empty(),a(this.target).css("display","block")):a(this.target).css("display",
"none")},removeFacet:function(a){var c=this;return function(){if(c.manager.store.removeByValue("fq",a)){var d=window.location.hash,d=d.replace("&fq="+a,"");AjaxSolrUno.oldHash=d;window.location.hash=d;AjaxSolrUno.doRequest(0)}return!1}}})})(jQuery);(function(a){AjaxSolr.FacetWidget=AjaxSolr.AbstractFacetWidget.extend({beforeRequest:function(){if(this.field=="labelLevel1"){for(var a=this.manager.store.values("fq"),c=null,d=0,f=a.length;d<f;d++){var k=a[d].split(":"),l=k[0],k=k[1].replace(/\"/g,"");l=="labelLevel"&&(c=k)}c&&c=="Videreg\u00e5ende"?this.manager.store.addByValue("f.labelLevel1.facet.sort","alpha"):this.manager.store.removeByValue("f.labelLevel1.facet.sort","alpha")}},afterRequest:function(){if(this.field=="labelLevel1"){for(var b=
this.manager.store.values("fq"),c=null,d=0,f=b.length;d<f;d++){var k=b[d].split(":"),l=k[0],k=k[1].replace(/\"/g,"");l=="labelLevel"&&(c=k)}if(c)a(this.target).show(),c=="Videreg\u00e5ende"&&AjaxSolrUno.manager.store.addByValue("f.labelLevel1.facet.sort","alpha");else{a(this.target).hide();return}}if(this.manager.response.facet_counts.facet_fields[this.field]===void 0)a(this.target).html(AjaxSolr.theme("no_items_found"));else{var c=0,i=[],m;for(m in this.manager.response.facet_counts.facet_fields[this.field])d=
parseInt(this.manager.response.facet_counts.facet_fields[this.field][m]),d>c&&(c=d),i.push({facet:m,count:d});if(this.field=="labelOrgAdminarea"){b=this.manager.store.values("fq");m=void 0;d=0;for(f=b.length;d<f;d++)k=b[d].split(":"),l=k[0],k=k[1].replace(/\"/g,""),l=="labelOrgAdminarea"&&(m=k);if(m){d=0;for(f=i.length;d<f;d++)if(i[d].facet==m){i=[i[d]];break}}}if(i.length==1&&!a.searchSettings.show_selected_facets)a(this.target).hide();else{a(this.target).show();a(this.target).find("ul").remove();
b=[];d=0;for(f=i.length;d<f;d++)m=i[d].facet,l=window.location.hash?window.location.hash:"#",l=l.replace(/\&start\=[0-9]*/g,""),l=l+"&fq="+this.field+":"+m,m=AjaxSolr.theme("tag",m,i[d].count,parseInt(i[d].count/c*10),l,m,this.clickHandler(m)),b[b.length]=m;a(this.target).addClass("facet");a(this.target).append(AjaxSolr.theme("facet_wrapper",b));a(this.target).find("li").length==0?a(this.target).hide():a(this.target).show()}}},clickHandler:function(a){var c=this,d=this.multivalue?"add":"set";return function(){var f=
window.location.hash?window.location.hash:"#",f=f.replace(/\&start\=[0-9]*/g,"");f.indexOf(c.field)!=-1&&f.indexOf(a)!=-1?(f=f.replace("&fq="+c.fq(a),""),d="remove"):f=a.indexOf(" ")==-1?f+"&fq="+c.field+":"+a:f+"&fq="+c.field+':"'+a+'"';AjaxSolrUno.oldHash=f;window.location.hash=f;c[d].call(c,a)&&AjaxSolrUno.doRequest(0);return!1}}})})(jQuery);(function(a){AjaxSolr.HitDescriptionWidget=AjaxSolr.AbstractWidget.extend({afterRequest:function(){var b=parseInt(this.manager.response.responseHeader.params&&this.manager.response.responseHeader.params.rows||10),c=parseInt(this.manager.response.responseHeader.params&&this.manager.response.responseHeader.params.start||0),d=parseInt(this.manager.response.response.numFound),f=a.searchSettings.hits_description_label,f=f.replace("[from]",'<span class="number">'+Math.min(d,c+1)+"</span>").replace("[to]",
'<span class="number">'+Math.min(d,c+b)+"</span>").replace("[total]",'<span class="number">'+d+"</span>");a(this.target).html(a("<span/>").html(f))}})})(jQuery);(function(a){AjaxSolr.LevelWidget=AjaxSolr.FacetWidget.extend({init:function(){AjaxSolrUno.manager.store.addByValue("facet.field","labelFagretning");AjaxSolrUno.manager.store.addByValue("facet.field","labelFaginteresse");AjaxSolrUno.manager.store.addByValue("facet.field","labelNUS1");AjaxSolrUno.manager.store.addByValue("facet.field","labelVideregende_studieprogram");AjaxSolrUno.manager.store.addByValue("facet.field","labelLevel1")},beforeRequest:function(){var b=this.manager.store.values("fq");this.field=
void 0;for(var c="",d=0,f=b.length;d<f;d++){var k=b[d].split(":"),l=k[0],k=k[1].replace(/\"/g,"");if(l=="labelLevel")switch(k){case "Fagskole":this.field="labelFagretning";c="Fagretning";break;case "Folkeh\u00f8gskole":this.field="labelFaginteresse";c="Faginteresse";break;case "Universitet og h\u00f8gskole":this.field="labelNUS1";c="Fagomr\u00e5de";break;case "Videreg\u00e5ende":this.field="labelVideregende_studieprogram",c="Utdanningsprogram"}}typeof this.field=="undefined"?a(this.target).hide():
(a(this.target).html("<h2>"+c+"</h2>"),a(this.target).show())}})})(jQuery);(function(a){AjaxSolr.ResultWidget=AjaxSolr.AbstractWidget.extend({afterRequest:function(){a(this.target).empty();a.searchSettings.style=="fields"?this.renderFields():this.renderTable();a.searchSettings.onResult(this.manager.response.response.docs)},facetLinks:function(a,c){var d=[];if(c)for(var f=0,k=c.length;f<k;f++)d.push(AjaxSolr.theme("facet_link",c[f],this.facetHandler(a,c[f])));return d},facetHandler:function(a,c){var d=this;return function(){d.manager.store.remove("fq");d.manager.store.addByValue("fq",
a+":"+c);AjaxSolrUno.doRequest(0);return!1}},renderFields:function(){for(var b=this.manager.response.response.docs.length,c=0;c<b;c++){var d=this.manager.response.response.docs[c],f=AjaxSolr.theme("snippet",d);a(this.target).append(AjaxSolr.theme("result",d,f,c,b));f=[];d.labelClassification&&(f[f.length]=this.facetLinks("labelClassification",d.labelClassification,"Classification"));d.labelTema&&(f[f.length]=this.facetLinks("labelTema",d.labelTema,"Tema"))}a("a.more").each(function(){a(this).toggle(function(){a(this).parent().find("span").show();
a(this).text("less");return!1},function(){a(this).parent().find("span").hide();a(this).text("more");return!1})});a.searchSettings.use_lightbox&&a(this.target).find("h2 a").fancybox({type:"iframe",width:980,height:"94%",overlayColor:"#333",onStart:function(){a("#fancybox-wrap").addClass("loading")},onComplete:function(){a.fancybox.showActivity();a("#fancybox-outer").css("opacity",0);a("#fancybox-frame").load(function(){a.fancybox.hideActivity();a("#fancybox-wrap").removeClass("loading");a("#fancybox-outer").animate({opacity:1},
300)})}})},renderTable:function(){var b=a("<table>").appendTo(a(this.target)),c=a("<thead>").appendTo(b),c=a("<tr>").appendTo(c),d;for(d in a.searchSettings.fields)a("<th>").addClass(a.searchSettings.fields[d].field).html(a.searchSettings.fields[d].label).appendTo(c);b=a("<tbody>").appendTo(b);c=this.manager.response.response.docs.length;for(d=0;d<c;d++){var f=this.manager.response.response.docs[d],k=f.linkRelAlternate;a.searchSettings.use_lightbox&&(k=k.match(/http:\/\/(.*?)\//)[0]+"node/"+f.termIntNid[0]+
"/external");var l=a("<tr>").addClass(d%2==0?"odd":"even").attr("id","nid_"+f.labelIntNid).appendTo(b),i;for(i in a.searchSettings.fields){var m=a.searchSettings.fields[i].field,m=AjaxSolrUno.filterMapping[m]?AjaxSolrUno.filterMapping[m].prefix:m,r=a("<td>").addClass(m.replace(".","_")).appendTo(l),t=a.searchSettings.fields[i].href;t?f[m]?r.html('<a href="'+f[t].toString()+'">'+f[m].toString()+"</a>"):r.html("&nbsp;"):m=="title"?r.html('<a href="'+k+'">'+f.title+"</a>"):r.html(f[m]?f[m].toString():
"&nbsp;")}}}})})(jQuery);(function(a){AjaxSolr.SelectWidget=AjaxSolr.AbstractWidget.extend({init:function(){var b=this;if(b.values){b.options={};for(var c=0;c<b.values.length;c++){var d=b.values[c];b.options[d]={label:d,queryValue:d}}}var f=RegExp("\\&"+b.variable+'\\=([a-z\u00e6\u00f8\u00e5A-Z\u00c6\u00d8\u00c50-9\\:\\" ]*)',"g"),c=a("<select>").change(function(){AjaxSolrUno.manager.store.remove(b.variable);AjaxSolrUno.manager.store.addByValue(b.variable,a(this).val());AjaxSolrUno.doRequest(0);var c=window.location.hash?
window.location.hash:"#",c=c.replace(f,""),c=c.replace(/\&start\=[0-9]*/g,""),c=c+"&"+b.variable+"="+a(this).val();AjaxSolrUno.oldHash=c;window.location.hash=c;a(this).blur()});a(b.target).append(c);for(key in b.options)d=a("<option>").attr("value",b.options[key].queryValue).text(b.options[key].label).appendTo(c),b.options[key].queryValue==AjaxSolrUno.manager.store.get(b.variable).value&&d.attr("selected","selected");(c=f.exec(window.location.hash))&&a(b.target).find('option[value="'+c[1]+'"]').attr("selected",
"selected")}})})(jQuery);(function(a){AjaxSolr.TagCloudWidget=AjaxSolr.AbstractFacetWidget.extend({afterRequest:function(){if(this.manager.response.facet_counts.facet_fields[this.field]===void 0)a(this.target).html(AjaxSolr.theme("no_items_found"));else{var b=0,c=[],d;for(d in this.manager.response.facet_counts.facet_fields[this.field]){var f=parseInt(this.manager.response.facet_counts.facet_fields[this.field][d]);f>b&&(b=f);c.push({facet:d,count:f})}c.sort(function(a,b){return a.facet<b.facet?-1:1});a(this.target).empty();
for(var f=0,k=c.length;f<k;f++)d=c[f].facet,a(this.target).append(AjaxSolr.theme("tag",d,parseInt(c[f].count/b*10),this.clickHandler(d)))}}})})(jQuery);(function(a){AjaxSolr.TextWidget=AjaxSolr.AbstractTextWidget.extend({init:function(){var b=this;a(b.target).append(AjaxSolr.theme("search_form"));a(b.target).find(".keywords").bind("keydown",function(c){if(c.which==13)return(c=a(this).val())&&b.set(c)?(AjaxSolrUno.doRequest(0),b.addToHash(c)):c==""&&b.removeFromHash(),!1});a(b.target).find(".search").click(function(){var c=a(this).parent().find(".keywords").val();c&&b.set(c)&&(AjaxSolrUno.doRequest(0),b.addToHash(c));return!1})},afterRequest:function(){var b=
this;if(b.manager.store.get("q").value){var c=a(AjaxSolrUno.labelTarget).find(".current_keywords");c.empty();c=a('<a href="#" class="remove_link">').text(" "+b.manager.store.get("q").value).click(function(a){a.preventDefault();b.removeFromHash()}).appendTo(c);a(b.target).find(".keywords").val(b.manager.store.get("q").value);a('<span class="remove_marker">(x)</span>').prependTo(c)}else a(b.target).find(".keywords").val("")},removeFromHash:function(){if(this.set("")){AjaxSolrUno.doRequest(0);a(AjaxSolrUno.labelTarget).find(".current_keywords").text("");
a(this.target).find(".keywords").val("");var b=window.location.hash,b=b.replace(/\&start\=[0-9]*/g,""),b=b.replace(/\&q\=[^\&]*/,"");AjaxSolrUno.oldHash=b;window.location.hash=b}},addToHash:function(a){var c=window.location.hash?window.location.hash:"#",c=c.replace(/\&q\=[^\&]*/,""),c=c.replace(/\&start\=[0-9]*/g,"");c+="&q="+a;AjaxSolrUno.oldHash=c;window.location.hash=c}})})(jQuery);(function(a){AjaxSolr.theme.prototype.result=function(b,c,d,f){var k=d%2==0?" odd":" even";d==0&&(k+=" first");d==f-1&&(k+=" last");d='<div class="search-result'+k+'">';b.linkRelAlternate?(f=b.linkRelAlternate,a.searchSettings.use_lightbox&&(f=f.match(/http:\/\/(.*?)\//)[0]+"node/"+b.termIntNid[0]+"/external"),d+='<h2><a href="'+f+'">'+b.title+"</a></h2>"):d+="<h2>"+b.title+"</h2>";d+="<p>"+c+"</p>";d+="</div>";return d};AjaxSolr.theme.prototype.snippet=function(b){var c="";b.summary?c+=b.summary:
b.content&&(c+=b.content.substr(0,b.content.regexIndexOf(/[ ,\.]/,300))+(b.content.length>300?"...":""));for(var d in a.searchSettings.fields){var f=a.searchSettings.fields[d].field,f=AjaxSolrUno.filterMapping[f]?AjaxSolrUno.filterMapping[f].prefix:f;b[f]&&b[f].length<=5&&(c+='<div class="field">',c+="<h3>"+a.searchSettings.fields[d].label+":</h3>",c+='<div class="field-content">'+b[f].toString()+"</div>",c+="</div>")}return c};String.prototype.regexIndexOf=function(a,c){var d=this.substring(c||0).search(a);
return d>=0?d+(c||0):d};AjaxSolr.theme.prototype.tag=function(b,c,d,f,k,l){return a.searchSettings.show_facet_numbers?(d=a("<div>"),a("<a>").text(b).attr("href",f).data("val",k).click(l).appendTo(d),a("<span>").text(" ("+c+")").appendTo(d),d):a('<a href="#"/>').text(b).attr("href",f).data("val",k).click(l)};AjaxSolr.theme.prototype.facet_wrapper=function(b){for(var c=a("<ul>").addClass("facet_content"),d=0;d<b.length;d++){var f=d%2==0?"odd":"even",f=a('<li class="facet_item">').addClass(f).html(b[d]);
d==0&&f.addClass("first");d==b.length-1&&f.addClass("last");c.append(f)}return c};AjaxSolr.theme.prototype.facet_link=function(b,c){return a('<a href="#"/>').text(b).click(c)};AjaxSolr.theme.prototype.no_items_found=function(){return"no items found in current selection"};AjaxSolr.theme.prototype.search_form=function(){var b=a("<div>").addClass("search-form");a("<a>").attr("href","http://utdanning.no").addClass("utd-logo-liten").text("utdanning.no").appendTo(b);a("<input>").attr("type","text").addClass("keywords").appendTo(b);
a("<input>").attr("type","submit").attr("value","S\u00f8k").addClass("search").appendTo(b);return b}})(jQuery);
